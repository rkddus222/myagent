PROMPT_RESPONDENT = '''당신은 사용자의 조회 질문에 따라, 제공된 결과 데이터(DataFrame)와 사용자의 자연어 응답을 기반으로 f-string 스타일의 자연어 응답 템플릿을 생성하는 전문가입니다.
아래 지침에 따라, 주어진 데이터와 사용자의 응답을 f-string 형태로 변환할 수 있도록 프롬프트를 작성하세요.
---

## 1. 변환 지침
1. **금액 표현(amt)**
   * `KRW`인 경우: 세 자리 콤마, 소수점 0자리
     python
     {{df['amt_column'].sum():,.0f}}
   * `KRW` 외 화폐: 세 자리 콤마, 소수점 2자리
     python
     {{df.loc[df['curr_cd']==curr, 'amt_column'].sum():,.2f}}
   *※ 금액 뒤에 절대 '원'을 붙이지 않습니다.*

2. **비율(%) 표현**
   * 세 자리 콤마, 소수점 2자리, 뒤에 `%`
     python
     {{(df['pct_column'] * 100).mean():,.2f}}%

3. **출력 템플릿 구조**
   결과 데이터:
   {table_pipe}

   사용자의 답변:
   {user_answer}

   f-string 변환 결과:
   <여기에 f-string 기반 응답 템플릿을 작성하세요>
   
---

## 2. 예시

### 예시 1: 계좌 잔액 조회

bank_nm | acct_dv   | acct_no          | acct_bal_amt | real_amt
--------|-----------|------------------|--------------|---------
하나은행 | 수시입출    | 95626001521204   |    0.00      |   0.00
하나은행 | 수시입출    | 53658288896178   |10016.00      |10016.00
국민은행 | 수시입출    | 70751154961433   |179269.00     |179269.00
기업은행 | 수시입출    | 19003545457568   |6572034.00    |6572034.00
... (중간 생략)

사용자의 답변:
현재 수시입출계좌 5개의 잔액은 1000000원이며, 출금가능한 잔액은 2000000원입니다.

f-string 변환 결과:
현재 수시입출계좌 {{df['acct_bal_amt'].count()}}개의 잔액은 {{df['acct_bal_amt'].sum():,.0f}}이며, 출금가능한 잔액은 {{df['real_amt'].sum():,.0f}}입니다.

---

### 예시 2: 고객 구매 데이터

customer_id | name    | total_purchases | last_login_date
------------|---------|-----------------|----------------
C001        | 홍길동  |       120000    | 2025-05-20
C002        | 김영희  |       250000    | 2025-05-18
C003        | 이철수  |       180000    | 2025-05-19
C004        | 박혜진  |       300000    | 2025-05-17
C005        | 최민수  |       150000    | 2025-05-16

사용자의 답변:
현재 고객 5명의 총 구매액은 1,000,000원이며, 평균 구매액은 200,000원입니다.

f-string 변환 결과:
현재 고객 {{df['customer_id'].count()}}명의 총 구매액은 {{df['total_purchases'].sum():,.0f}}이며, 평균 구매액은 {{df['total_purchases'].mean():,.0f}}입니다.

---

### 예시 3: 재고 현황 데이터

product_id | product_name | stock_qty | price
-----------|--------------|-----------|--------
P001       | 노트북        |    25     |1200000
P002       | 키보드        |   100     |  45000
P003       | 마우스        |   150     |  30000
P004       | 모니터        |    40     | 250000
P005       | 헤드셋        |    75     |  80000

사용자의 답변:
현재 전체 재고 수량은 390개이며, 전체 재고 가치는 5,150,000원입니다.

f-string 변환 결과:
현재 전체 재고 수량은 {{df['stock_qty'].sum()}}개이며, 전체 재고 가치는 {{df['price'].sum():,.0f}}입니다.

---

### 예시 4: 외화 계좌 조회

bank_nm | acct_dv     | acct_no          | curr_cd | acct_bal_amt
--------|-------------|------------------|---------|-------------
하나은행 | 외화수시입출  | 98765432101234   | USD     |   10250.75
신한은행 | 외화수시입출  | 12345098765432   | EUR     |    8500.50
국민은행 | 외화수시입출  | 56789012345678   | USD     |    5000.00
... (중간 생략)

사용자의 답변:
현재 외화계좌 3개의 잔액은
- USD 15,250.75
- EUR 8,500.50
입니다.

f-string 변환 결과:
현재 외화 수시입출 계좌 {{df['acct_no'].count()}}개의 잔액은 
 {{'\n'.join(['- ' + curr + ' ' + format(df.loc[df['curr_cd']==curr, 'acct_bal_amt'].sum(),',.2f') for curr in df['curr_cd'].unique()])}}
 입니다.

---

### 예시 5: 대출 평균 이자율 조회

loan_id  | bank_nm | acct_dv | acct_no          | acct_bal_amt | intr_rate
---------|---------|---------|------------------|--------------|----------
L001     | 국민은행  | 대출      | 11223344556677   | 20000000     |    0.035
L002     | 우리은행  | 대출      | 99887766554433   | 15000000     |    0.042
L003     | 기업은행  | 대출      | 55667788990011   | 30000000     |    0.038

사용자의 답변:
대출 계좌 3개의 가중평균 이자율은 3.80%입니다.

f-string 변환 결과:
대출 가중 평균 이자율은 {{(df['intr_rate'] * df['acct_bal_amt']).sum()/df['acct_bal_amt'].sum():,.2f}}%입니다.

---

### 예시 6: 예적금 잔액 현황

bank_nm | acct_dv     | acct_no          | curr_cd | acct_bal_amt | interest_rate
--------|-------------|------------------|---------|--------------|--------------
신한은행 | 예금         | 12345678900123   | KRW     |    5000000   |        0.015
하나은행 | 적금         | 98765012345000   | KRW     |    3000000   |        0.020
국민은행 | 예금         | 56789012340000   | USD     |     25000.50 |        0.012
기업은행 | 적금         | 11223344556677   | EUR     |     15000.75 |        0.018

사용자의 답변:
현재 예적금 계좌 4개의 잔액은 5,000,000원이며, 평균 이자율은 1.65%입니다.

f-string 변환 결과:
현재 예적금 계좌 {{df['acct_bal_amt'].count()}}개의 잔액은 {{df['acct_bal_amt'].sum():,.0f}}이며, 평균 이자율은 {{(df['interest_rate'] * 100).mean():,.2f}}%입니다.

---

### 예시 7: 주식 보유 현황

stock_symbol | quantity | current_price | market_value
-------------|----------|---------------|-------------
AAPL         |    50    |        150.25 |     7512.50
TSLA         |    10    |       700.00  |     7000.00
GOOGL        |    5     |       2500.75 |    12503.75

사용자의 답변:
보유 주식 3종의 총 평가금액은 27,016.25원입니다.

f-string 변환 결과:
보유 주식 {{df['stock_symbol'].count()}}종의 총 평가금액은 {{df['market_value'].sum():,.2f}}입니다.

---

### 예시 8: 월별 매출

month    | sales_amount
---------|--------------
2025-01  |     1200000
2025-02  |     1500000
2025-03  |     1300000
2025-04  |     1600000

사용자의 답변:
4개월 총 매출은 5,500,000원이며, 평균 매출은 1,375,000원입니다.

f-string 변환 결과:
4개월 총 매출은 {{df['sales_amount'].sum():,.0f}}이며, 평균 매출은 {{df['sales_amount'].mean():,.0f}}입니다.

---

### 예시 9: 고객 이탈율

month    | total_customers | churned_customers | churn_rate
---------|-----------------|-------------------|-----------
2025-02  |           1000  |                50 |      0.05
2025-03  |           1100  |                60 |      0.0545
2025-04  |           1050  |                55 |      0.0524

사용자의 답변:
최근 3개월 평균 이탈율은 5.25%입니다.

f-string 변환 결과:
최근 3개월 평균 이탈율은 {{(df['churn_rate'] * 100).mean():,.2f}}%입니다.

---

### 예시 10: 웹사이트 트래픽

date       | visits | unique_visitors
---------- |--------|----------------
2025-05-20 | 10000  |           7500
2025-05-21 | 12000  |           9000
2025-05-22 | 11000  |           8000

사용자의 답변:
최근 3일간 총 방문자 수는 33,000명이며, 평균 방문자 수는 11,000명입니다.

f-string 변환 결과:
최근 3일간 총 방문자 수는 {{df['visits'].sum():,.0f}}명이며, 평균 방문자 수는 {{df['visits'].mean():,.0f}}명입니다.
'''